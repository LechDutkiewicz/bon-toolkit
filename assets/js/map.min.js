var mapWidgets;(function(a){mapWidgets={init:function(b,d){var f={startZoom:16,lat:43.580577,lng:1.52122,markerImage:"",markersList:""};var c=a.extend(f,d);var e=b;mapWidgets.build(e,c)},build:function(s,d){var i=s.attr("id");var q='<div id="map-container-'+i+'" class="map-container"></div>';s.append(q);if(p===""){var l=new google.maps.LatLng(d.lat,d.lng);var o={zoom:d.startZoom,center:l,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:true,streetViewControl:true,streetViewControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT},};var r=new google.maps.Map(document.getElementById("map-container-"+i),o);var n=r.getStreetView();r.setTilt(45);var k=d.markerImage;var f=new google.maps.Marker({position:l,map:r,icon:k})}else{var p=d.markersList;var g;var l=new google.maps.LatLng(d.lat,d.lng);var o={zoom:d.startZoom,center:l,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:true,streetViewControl:true,streetViewControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT},};var r=new google.maps.Map(document.getElementById("map-container-"+i),o);google.maps.event.addListener(r,"click",function(t){if(g){g.close()}});var n=r.getStreetView();r.setTilt(45);var k=d.markerImage;a.each(p,function(u,w){var v=new google.maps.LatLng(w.latitude,w.longitude);var t=new google.maps.Marker({position:v,map:r,icon:k});google.maps.event.addListener(t,"click",function(){if(g){g.close()}if(w.infoWindows){g=new google.maps.InfoWindow({content:w.infoWindows});g.open(r,t)}})})}var j='<div class="mapbutton mapzoom more">+</div>';var c='<div class="mapbutton mapzoom less">-</div>';var m="";var b="";var h="";var e='<div class="maptypebox"><div class="mapbutton maptype plain selected">Plain</div><div class="mapbutton maptype sat">Satellite</div><div class="mapbutton maptype hyb">Hybrid</div></div>';s.append(j).append(c).append(e);google.maps.event.addListener(n,"visible_changed",function(){if(n.getVisible()){s.find(".mapbutton").hide();s.find(".maptypebox").hide()}else{s.find(".mapbutton").show();s.find(".maptypebox").show()}});a(window).resize(function(){r.setCenter(l)});a(".less").click(function(){d.startZoom--;if(d.startZoom<=0){d.startZoom=0}r.setZoom(d.startZoom);a(this).blur()});a(".more").click(function(){d.startZoom++;if(d.startZoom>=21){d.startZoom=21}r.setZoom(d.startZoom);a(this).blur()});a(".maptype.plain").click(function(){r.setMapTypeId(google.maps.MapTypeId.ROADMAP);a(".maptype").removeClass("selected");a(this).addClass("selected")});a(".maptype.hyb").click(function(){r.setMapTypeId(google.maps.MapTypeId.HYBRID);a(".maptype").removeClass("selected");a(this).addClass("selected")});a(".maptype.sat").click(function(){r.setMapTypeId(google.maps.MapTypeId.SATELLITE);a(".maptype").removeClass("selected");a(this).addClass("selected")});a(".more, .less").hover(function(t){a(this).addClass("hovered")},function(t){a(this).removeClass("hovered")})}}})(jQuery);